<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="code-it-app">
  <template>
    <style>
      :host {
        display: block;
        height: 100%;
        box-sizing: border-box;
        padding: 0px 10px;
      }
      .paper-font-display4 {
        @apply(--paper-font-display4);
      }

      .paper-font-display3 {
        @apply(--paper-font-display3);
      }

      .paper-font-display2 {
        @apply(--paper-font-display2);
      }

      .paper-font-display1 {
        @apply(--paper-font-display1);
      }

      .paper-font-headline {
        @apply(--paper-font-headline);
      }

      .paper-font-title {
        @apply(--paper-font-title);
      }

      .paper-font-subhead {
        @apply(--paper-font-subhead);
      }

      .paper-font-body2 {
        @apply(--paper-font-body2);
      }

      .paper-font-body1 {
        @apply(--paper-font-body1);
      }

      .paper-font-caption {
        @apply(--paper-font-caption);
      }

      .paper-font-menu {
        @apply(--paper-font-menu);
      }

      .paper-font-button {
        @apply(--paper-font-button);
      }
      iron-pages {
        height: 100%;
      }
      iron-pages > section {
        height: 100%;
      }
      #blockly {
        position: relative;
      }
    </style>
    <iron-pages attr-for-selected="data-route" selected="{{route}}" on-iron-select="handleRouteChange">
      <section data-route="home">
        <div class="paper-font-display1">CodeIt!</div> 
        <div class="paper-font-title">Program list</div> 
<table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp">
  <thead>
    <tr>
      <th class="mdl-data-table__cell--non-numeric">Material</th>
      <th>Quantity</th>
      <th>Unit price</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="mdl-data-table__cell--non-numeric">Acrylic (Transparent)</td>
      <td>25</td>
      <td>$2.90</td>
    </tr>
    <tr>
      <td class="mdl-data-table__cell--non-numeric">Plywood (Birch)</td>
      <td>50</td>
      <td>$1.25</td>
    </tr>
    <tr>
      <td class="mdl-data-table__cell--non-numeric">Laminate (Gold on Blue)</td>
      <td>10</td>
      <td>$2.35</td>
    </tr>
  </tbody>
</table>
        <a href="{{baseUrl}}program">Go to the program</a></div>
      </section>
      <section data-route="program" class="vertical layout">
        <div><paper-button class="paper-font-button" on-tap="goToProgramList" noink><iron-icon icon="arrow-back"></iron-icon> Back to program list</paper-button></div>
        <code-it-blockly id="blockly" class="flex"></code-it-blockly>
      </section>
    </iron-pages>
    <paper-toast id="toast">
      <span class="toast-hide-button" role="button" tabindex="0" onclick="app.$.toast.hide()">Ok</span>
    </paper-toast>
  </template>
  <script>
  (function() {
    'use strict';

    Polymer({
      is: 'code-it-app',

      properties: {
        baseUrl: {
          type: String,
          value: '/',
        },
        route: {
          type: String,
          value: 'home',
          notify: true,
        },
      },
      ready: function() {
      },
      handleRouteChange: function(evt) {
        // HACK: iron-select handler in code-it-blockly can't stop propagation for some reason.
        if (evt.srcElement.id === 'codeTabs') {
          return;
        }

        if (this.route === 'home') {
          this.$.blockly.hideExtraDivs();
        } else {
          this.$.blockly.inject();
          this.$.blockly.selected = 0; // Needed to make the toolbox show up, see HACK above.
          this.$.blockly.showExtraDivs();
        }
      },
      goToProgramList: function() {
        page.redirect(this.baseUrl);
      },
    });
  })();
  </script>
</dom-module>
